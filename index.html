<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>万通国际-ONETOP</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="css/mui.min.css">
		<link rel="stylesheet" href="css/app.css" />
		<link rel="stylesheet" href="css/icons-extra.css" />
		<style>
			html,
			body {
				background-color: #efeff4;
			}
		</style>
	</head>
	<body>
		<header class="mui-bar mui-bar-nav">

			<h1 id="title" class="mui-title">游戏</h1>
			<button id="accountBtn" class="mui-btn mui-btn-blue mui-btn-link mui-pull-right"><small id="account">游客</small></button>
		</header>
		<nav id="bottom-tab" class="mui-bar mui-bar-tab">
			<a id="tab-games" class="mui-tab-item" href="#games">
				<span class="mui-icon mui-icon-extra mui-icon-extra-grech"></span>
				<span class="mui-tab-label">游戏</span>
			</a>
			<a id="tab-wallet" class="mui-tab-item" href="#wallet">
				<span class="mui-icon mui-icon-extra mui-icon-extra-card"></span>
				<span class="mui-tab-label">钱包</span>
			</a>
			<a id="tab-setting" class="mui-tab-item" href="#setting">
				<span class="mui-icon mui-icon-contact"></span>
				<span class="mui-tab-label">我</span>
			</a>
		</nav>
		<div class="mui-content">
			<div id="games" class="mui-control-content" style="margin-top: 5px;">
				<div id="slider" class="mui-slider">
					<div class="mui-slider-group mui-slider-loop">
						<!-- 额外增加的一个节点(循环轮播：第一个节点是最后一张轮播) -->
						<div class="mui-slider-item mui-slider-item-duplicate">
							<a href="#">
								<img src="images/e03.png">
							</a>
						</div>
						<!-- 第一张 -->
						<div class="mui-slider-item">
							<a href="#">
								<img src="images/e01.png">
							</a>
						</div>
						<!-- 第二张 -->
						<div class="mui-slider-item">
							<a href="#">
								<img src="images/e02.png">
							</a>
						</div>
						<!-- 第三张 -->
						<div class="mui-slider-item">
							<a href="#">
								<img src="images/e03.png">
							</a>
						</div>

						<!-- 额外增加的一个节点(循环轮播：最后一个节点是第一张轮播) -->
						<div class="mui-slider-item mui-slider-item-duplicate">
							<a href="#">
								<img src="images/e01.png">
							</a>
						</div>
					</div>
					<div class="mui-slider-indicator">
						<div class="mui-indicator mui-active"></div>
						<div class="mui-indicator"></div>
						<div class="mui-indicator"></div>
					</div>
				</div>

				<ul id="game-list" class="mui-table-view mui-table-view-chevron ">
					<li id="hj" class="mui-table-view-cell mui-media">
						<a class="mui-navigate-right" href="javascript:void(0);">
							<img class="mui-media-object mui-pull-left" src="images/01.png">
							<div class="mui-media-body">
								皇家国际
								<p class='mui-ellipsis'>万通国际旗下场地</p>
							</div>
						</a>
					</li>
					<li id="wnsr" class="mui-table-view-cell mui-media">
						<a class="mui-navigate-right" href="javascript:void(0);">
							<img class="mui-media-object mui-pull-left" src="images/02.png">
							<div class="mui-media-body">
								威尼斯人
								<p class='mui-ellipsis'>万通国际旗下场地敬请期待</p>
							</div>
						</a>
					</li>
					<li id="jxb" class="mui-table-view-cell mui-media">
						<a class="mui-navigate-right" href="javascript:void(0);">
							<img class="mui-media-object mui-pull-left" src="images/03.png">
							<div class="mui-media-body">
								机械版百乐
								<p class='mui-ellipsis'>公平公正，拒绝鬼手作弊，请下载APP试玩</p>
							</div>
						</a>
					</li>
					<li class="mui-table-view-cell mui-media">
						<a class="mui-navigate-right" href="javascript:void(0);">
							<img class="mui-media-object mui-pull-left" src="images/04.png">
							<div class="mui-media-body">
								机械版龙虎
								<p class='mui-ellipsis'>机械发牌，公平公正，请下载APP试玩</p>
							</div>
						</a>
					</li>
					<li class="mui-table-view-cell mui-media">
						<a class="mui-navigate-right" href="javascript:void(0);">
							<img class="mui-media-object mui-pull-left" src="images/05.png">
							<div class="mui-media-body">
								机械版单挑
								<p class='mui-ellipsis'>公平公正，拒绝鬼手作弊，请下载APP试玩</p>
							</div>
						</a>
					</li>
					<li class="mui-table-view-cell mui-media">
						<a class="mui-navigate-right" href="javascript:void(0);">
							<img class="mui-media-object mui-pull-left" src="images/06.png">
							<div class="mui-media-body">
								彩票
								<p class='mui-ellipsis'>官网同步，超高赔率，敬请期待</p>
							</div>
						</a>
					</li>
				</ul>
			</div>

			<div id="wallet" class="mui-control-content">
				<div class="app-wallet-block">
					<div class="mui-text-center">
						<h1>0.00</h1>
						<h5>账户余额</h5>
					</div>
					<div class="mui-row">
						<div class="mui-col-sm-6 mui-col-xs-6">
							<div class="mui-text-center">
								<h4>0.00</h4>
								<h6>冻结金额</h6>
							</div>
						</div>
						<div class="mui-col-sm-6 mui-col-xs-6">
							<div class="mui-text-center">
								<h4>0.00</h4>
								<h6>预计可回收</h6>
							</div>
						</div>
					</div>

				</div>
				<ul class="mui-table-view mui-grid-view mui-grid-9">
					<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4"><a href="#">
							<span class="mui-icon mui-icon-download"></span>
							<div class="mui-media-body">存款</div>
						</a></li>
					<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4"><a href="#">
							<span class="mui-icon mui-icon-upload"></span>
							<div class="mui-media-body">取款</div>
						</a></li>
					<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4"><a href="#">
							<span class="mui-icon mui-icon-reload"></span>
							<div class="mui-media-body">回收</div>
						</a></li>
				</ul>

				</ul>
				<ul class="mui-table-view">
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							银行卡管理
						</a>
					</li>
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							存款记录
						</a>
					</li>
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							取款记录
						</a>
					</li>
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							交易记录
						</a>
					</li>
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							投注记录
						</a>
					</li>
				</ul>
			</div>

			<div id="setting" class="mui-control-content">

				<ul class="mui-table-view">
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							新消息通知
						</a>
					</li>
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							修改个人资料
						</a>
					</li>
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							修改登录密码
						</a>
					</li>

				</ul>
				<ul class="mui-table-view" style="margin-top: 25px;">
					<li id="logout" class="mui-table-view-cell">
						<a style="text-align: center;color: #FF3B30;">
							退出登录
						</a>
					</li>
					<li id="login" class="mui-table-view-cell">
						<a style="text-align: center;color:#00499C">
							登录账号
						</a>
					</li>
					<li id="reg" class="mui-table-view-cell">
						<a style="text-align: center;color:#00499C">
							注册账号
						</a>
					</li>
				</ul>
			</div>
		</div>

	</body>
	<script src="js/mui.min.js"></script>
	<script src="js/app.js"></script>
	<script>
		//mui.trigger(document.getElementById('tab-wallet'),'tap');
		(function($, doc) {
			$.init({
				swipeBack: true,
			});

			var firstRun = 0;
			if (firstRun == 1) {
				$('#slider').slider({
					interval: 4000
				});
				firstRun++;
			} else {
				$('#slider').slider().refresh();
			}

			var activeTab = app.getSession('activeTab') || 'games';

			doc.getElementById(activeTab).className += ' mui-active';
			doc.getElementById('tab-' + activeTab).className += ' mui-active';

			$('#bottom-tab').on('tap', '.mui-tab-item', function(event) {
				var id = this.getAttribute("id");
				activeTab = id.substr(4);
				app.setSession('activeTab', activeTab);
			});

			$('#game-list').on('tap', '.mui-media', function(event) {
				var id = this.getAttribute("id");
				switch (id) {
					case "hj":
						app.gameLoginInfo('hj', window.location.href, function(data) {
							if (data.code == 0) {
								app.go(data.data);
							} else {
								$.alert('游戏服务器访问失败，请稍后重试！');
							}
						});
						break;
					default:
						$.toast('即将推出，敬请期待！');
						break;
				}
			});


			var loginBtn = doc.getElementById('login');
			var regBtn = doc.getElementById('reg');
			var logoutBtn = doc.getElementById('logout');
			loginBtn.addEventListener('tap', function(event) {
				app.go('login.html');
			});
			regBtn.addEventListener('tap', function(event) {
				app.go('reg.html');
			});
			logoutBtn.addEventListener('tap', function(event) {
				app.logout();
			});


			updateUnserInfo();

			function updateUnserInfo() {
				var state = app.getState();
				console.log(state);
				var account = doc.getElementById('account');

				if (state.account) {
					account.innerHTML = state.account;
					loginBtn.style.display = 'none';
					regBtn.style.display = 'none';
					logoutBtn.style.display = '';
				} else {
					account.innerHTML = '游客';
					loginBtn.style.display = '';
					regBtn.style.display = '';
					logoutBtn.style.display = 'none';
				}
			}

		}(mui, document));
	</script>
</html>
